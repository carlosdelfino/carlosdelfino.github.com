<?xml version="1.0"?>
<content collectionGUID="642BD7FC-9115-4D72-9F48-3DD4F809E1DB">
  <lastEdited clientType="local-build-20140701" date="2014-07-01 18:13:22 +0000"/>
  <textBox id="generic-header-attribute" dynamic="no" visible="yes">
    <richText>Artigos, tutoriais e Dicas - Carlos Delfino</richText>
  </textBox>
  <textBox id="generic-title-attributes" dynamic="no" visible="yes">
    <richText>Instala&#xE7;&#xE3;o do Asterisk para uso com Arduino</richText>
  </textBox>
  <textBox id="generic-datefield-attributes" dynamic="no" visible="yes">
    <richText>ter&#xE7;a-feira, 24 de junho de 2014</richText>
  </textBox>
  <image id="generic-picture-attributes" dynamic="no" visible="yes" src="24_Instalacao_do_Asterisk_para_uso_com_Arduino_files/shapeimage_1.png" left="0px" top="0px" width="415px" height="233px"/>
  <textBox id="generic-body-attributes" dynamic="no" visible="yes">
    <richText>Antes de come&#xE7;armos &#xE9; importante lembrar que Asterisk foi desenvolvido para o SO Linux, por&#xE9;m h&#xE1; ports para outros SOs como FreeBSD, MACOSX e at&#xE9; para Windows, mas o mais interessante e o fato de haver ports para que possa ser usado com RaspberryPI e at&#xE9; para Beagle Bone.&#xD;&#xD;Para instalar o Asterisk &#xE9; preciso seguir alguns passos, dentre eles voc&#xEA; deve primeiro fazer o Download dos seguintes pacotes, para isso crie uma pasta por exemplo chamada &#x201C;/usr/src/asterisk&#x201D;, ou outro local que achar mais indicado em sua instala&#xE7;&#xE3;o Linux. (sim iremos nos basear no Linux, j&#xE1; que o Asterisk roda bem melhor nesta SO), observe neste tutorial estarei usando o Ubuntu em sua &#xFA;ltima vers&#xE3;o.&#xD;&#xD;Use os seguintes comandos para baixar os pacotes:&#xD;&#xD;wget &lt;a href="http://downloads/asterisk.org/pub/telephony/asterisk/asterisk-1.8.current.tar.gz"&gt;http://downloads/asterisk.org/pub/telephony/asterisk/asterisk-1.8.current.tar.gz&lt;/a&gt;&#xD;&#xD;wget &lt;a href="http://downloads/asterisk.org/pub/telephony/libpri/libpri-1.4.current.tar.gz"&gt;http://downloads/asterisk.org/pub/telephony/libpri/libpri-1.4.current.tar.gz&lt;/a&gt;&#xD;wget &lt;a href="http://downloads/asterisk.org/pub/telephony/libss7/libss7-1.0.2.tar.gz"&gt;http://downloads/asterisk.org/pub/telephony/libss7/libss7-1.0.2.tar.gz&lt;/a&gt;&#xD;&#xD;wget &lt;a href="http://downloads/asterisk.org/pub/telephony/dahdi-linux/dahdi-tools/dahdi-tools-current.tar.gz"&gt;http://downloads/asterisk.org/pub/telephony/dahdi-linux/dahdi-tools/dahdi-tools-current.tar.gz&lt;/a&gt;&#xD;wget &lt;a href="http://downloads/asterisk.org/pub/telephony/dahdi-linux/dahdi-linux/dahdi-linux-current.tar.gz"&gt;http://downloads/asterisk.org/pub/telephony/dahdi-linux/dahdi-linux/dahdi-linux-current.tar.gz&lt;/a&gt;&#xD;wget &lt;a href="http://openr2.googlecode.com/files/openr2-1.3.1.tar.gz"&gt;http://openr2.googlecode.com/files/openr2-1.3.3.tar.gz&lt;/a&gt;&#xD;&#xD;Agora que baixou os pacotes descompacte cada um e certifique-se que as pastas foram criadas conforme o nome de cada arquivo.&#xD;&#xD;Compilando os pacotes e instalando&#xD;&#xD;Vamos come&#xE7;ar a instala&#xE7;&#xE3;o pelo pacote dahdi-linux-current.tar.gz, portanto entre no diretorio que foi criado ao descompactar este pacote e digite os seguintes comandos em cada linha:&#xD;&#xD;make clean&#xD;make&#xD;make install&#xD;&#xD;O pr&#xF3;ximo pacote deve ser o dahdi-tools-current.tar.gz, siga o mesmo procedimento mudando para o diret&#xF3;rio criado com a descompacta&#xE7;&#xE3;o e em seguida digite os comandos no diret&#xF3;rio&#xD;&#xD;make clean&#xD;./configure&#xD;make&#xD;make install&#xD;&#xD;Continuarmos o mesmo procedimento agora no pacote libpri-1.4.current.tar.gz, digitando os seguintes comandos em cada linha:&#xD;&#xD;make&#xD;make install&#xD;&#xD;Agora compilamos o pacote openr2-1.3.1-tar.gz, Este pacote n&#xE3;o necess&#xE1;rio ao nosso Workshop, por&#xE9;m mantive sua instala&#xE7;&#xE3;o para divulga&#xE7;&#xE3;o, j&#xE1; que se o usu&#xE1;rio vier a desejar integrar seu Asterisk aos sistema telef&#xF4;nico Brasileiro ir&#xE1; precisar desta biblioteca de sinaliza&#xE7;&#xE3;o.&#xD;&#xD;Descompacte como os anteriores entre no diret&#xF3;rio criado e digite os comandos em cada linha, este pacote n&#xE3;o ser&#xE1; necess&#xE1;rio em nosso workshop, j&#xE1; que seu uso &#xE9; para quem pretende ter linha E1 em seu ambiente:&#xD;&#xD;./configure --prefix=/usr&#xD;make&#xD;make install&#xD;&#xD;O pacote libss7-1.0.2.tar.gz para terminar os prequistos manuais, seguindo tamb&#xE9;m os mesmo procedimentos:&#xD;&#xD;make clean&#xD;make&#xD;make install&#xD;&#xD;E finalmente o pr&#xF3;prio Asterisk que n&#xE3;o tem segredos na instala&#xE7;&#xE3;o sendo necess&#xE1;rio os seguintes comandos, obseve que ao digitar o comando &#x201C;make menuselect&#x201D; voc&#xEA; pode sair dele sem mudar nenhuma sele&#xE7;&#xE3;o, por&#xE9;m se quiser arriscar (experimentando) ou sabe exatamente o que faz, pode mudar as sele&#xE7;&#xF5;es para atender suas necessidades:&#xD;&#xD;contrib/scripts/get_ilbc_source.sh&#xD;contrib/scripts/get_mp3_source.sh&#xD;contrib/scripts/install_prereq&#xD;make menuselect&#xD;make&#xD;make install&#xD;make samples&#xD;make config&#xD;&#xD;Pronto, em tese o Asterisk est&#xE1; pronto e instalado para iniciar nosso workshop.&#xD;&#xD;Melhorando a Seguran&#xE7;a da Instala&#xE7;&#xE3;o&#xD;Ap&#xF3;s a instala&#xE7;&#xE3;o acima, tudo estar&#xE1; configurado para ser executado como Root, por&#xE9;m isso n&#xE3;o &#xE9; uma boa pr&#xE1;tica, e o ideal &#xE9; criar um usu&#xE1;rio especifico para rodar este processo. &#xD;&#xD;Para isso inicie criando um usu&#xE1;rio e um grupo com os dois comandos abaixo:&#xD;&#xD;adduser --system --home /var/lib/asterisk --no-create-home asterisk&#xD;addgroup asterisk&#xD;&#xD;Agora mude o propriet&#xE1;rios e grupo das pastas relativas ao Asterisk usando o comando abaixo:&#xD;&#xD;chown -R asterisk:asterisk /var/lib/asterisk \&#xD;                           /var/log/asterisk \&#xD;                           /var/run/asterisk \&#xD;                           /var/spool/asterisk&#xD;&#xD;A pasta de configura&#xE7;&#xE3;o no diret&#xF3;rio &#x201C;etc&#x201D; deve ter o propriet&#xE1;rio como sendo o &#x201C;root&#x201D; por&#xE9;m o grupo deve ser &#x201C;asterisk&#x201D;, permitindo assim que membros deste grupo possam acessa-la:&#xD;&#xD;chown -R root:asterisk /etc/asterisk/&#xD;&#xD;Agora ajuste os direitos de acesso assim todos os propriet&#xE1;rios poder&#xE3;o acessar livremente as respectivas pastas, o grupo poder&#xE1; l&#xEA;-las sem problemas, e os demais usu&#xE1;rios ficaram sem acesso:&#xD;chmod -R u=rwX,g=rX,o= /var/lib/asterisk \&#xD;                                      /var/log/asterisk \&#xD;                                      /var/run/asterisk \&#xD;                                      /var/spool/asterisk \&#xD;                                      /etc/asterisk&#xD;&#xD;Agora para finalizar estas configura&#xE7;&#xF5;es, entre no diret&#xF3;rio &#x201C;/etc/default/&#x201D; e edite o arquivo asterisk, neste arquivos est&#xE3;o os par&#xE2;metros padr&#xF5;es para inicializa&#xE7;&#xE3;o autom&#xE1;tica do Asterisk no linux. Procure as duas linhas que se refere respectivamente ao usu&#xE1;rio e grupo e mude o nome destes para os nomes criados nos comandos acima.&#xD;&#xD;Finalmente reinicialize ou inicialize o Asterisk usando o comando:&#xD;&#xD;service asterisk restart&#xD;&#xD;Pr&#xF3;ximo Passo&#xD;&lt;a href="http://carlosdelfino.eti.br/Carlos_Delfino_-_Consultoria_e_Projetos/Artigos/Entradas/2014/6/24_Configurando_o_Asterisk_para_os_primeiros_passos.html"&gt;Primeiro est&#xE1;gio de Configura&#xE7;&#xE3;o do Asterisk para Integra-se ao Arduino.&lt;/a&gt;&#xD;&#xD;Mais Informa&#xE7;&#xF5;es:&#xD;Outras informa&#xE7;&#xF5;es sobre o Workshop podem ser obtidos no link: &lt;a href="https://www.facebook.com/events/1500419536839268/?ref=ts&amp;fref=ts"&gt;https://www.facebook.com/events/1500419536839268/&lt;/a&gt;</richText>
  </textBox>
</content>
